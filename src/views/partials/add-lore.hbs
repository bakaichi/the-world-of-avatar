<form class="box" action="/nation/{{nation._id}}/addlore" method="POST">
  <label>Enter Lore Details</label>
  <div class="field is-horizontal">
    <div class="field-body">
      <div class="field">
        <input class="input" type="number" min="1" max="3" placeholder="Enter book number" name="bookno">
      </div>
      <div class="field is-fullwidth">
        <!-- Enhanced Select2 input for characters -->
        <select class="input select2-character" name="charactersinv" multiple="multiple">
          {{#each characters}}
            <option value="{{this.name}}">{{this.name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="field">
        <input class="input" type="text" placeholder="Enter location (use map guides)" name="location">
      </div>
      <div class="field">
        <input class="input" type="text" placeholder="Enter lore" name="lore">
      </div>
    </div>
  </div>
  <button class="button is-primary">Add Lore</button>
</form>


<script>
$(document).ready(function() {
  $('.select2-character').select2({
    tags: true, // tag feature
    tokenSeparators: [','],
    minimumInputLength: 2,
    placeholder: "Type & Select characters",
    createTag: function (params) {
      // Validate entered tags here if needed
      var term = $.trim(params.term);
      if (term === '') {
        return null;
      }
      return {
        id: term,
        text: term,
        newOption: true // Mark the option as new
      };
    }
  });
});
</script>
